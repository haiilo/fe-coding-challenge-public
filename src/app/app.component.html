<div class="stage">
  <div *ngIf="error$ | async as error" class="error">
    {{ error }}
  </div>
  <div class="product-list">
    <app-product-card
      *ngFor="let product of products$ | async"
      [product]="product"
    ></app-product-card>
  </div>
  <button
    *ngIf="(more$ | async) !== false"
    class="more"
    (click)="loadMore()"
    [disabled]="loading$ | async"
  >
    <ng-container *ngIf="loading$ | async; else buttonContent">
      Loading...
    </ng-container>
    <ng-template #buttonContent>
      <ng-container *ngIf="(error$ | async) !== null; else loadMoreText">
        Try again
      </ng-container>
      <ng-template #loadMoreText> Load more </ng-template>
    </ng-template>
  </button>
</div>
